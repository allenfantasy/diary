<!DOCTYPE html><!--[if lte IE 8]>
<html lang="en" class="lte-ie8">
<![endif]-->
<!--[if gt IE 8]><!-->
<html lang="en">
<!--<![endif]--><head><meta charset="utf-8"><title>June 15, 2016</title><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/diary/styles/global.css"><link rel="stylesheet" href="/diary/styles/tomorrow.css"><link rel="stylesheet" href="/diary/styles/diary.css"></head><body><header class="header"><div class="index"><a href="/diary/">Index</a></div><h1>June 15, 2016</h1></header><div class="content"><div class="diary"><h2 id="css">CSS</h2>
<p>Reading notes of <a href="http://www.quirksmode.org/mobile/viewports2.html">A tale of two viewports, Part II</a></p>
<h3 id="tl-dr">tl;dr</h3>
<p>use this:</p>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-title">meta</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"viewport"</span> <span class="hljs-attribute">content</span>=<span class="hljs-value">"width=device-width,initial-scale=1"</span>&gt;</span>
</code></pre>
<h3 id="layout-viewport">Layout Viewport</h3>
<blockquote>
<p>Imagine the layout viewport as being a large image which does not change size or shape.</p>
</blockquote>
<p>Layout viewport <strong>never changed</strong>.</p>
<h3 id="visual-viewport">Visual Viewport</h3>
<blockquote>
<p>The visual viewport is the part of the page thatâ€™s currently shown on-screen.</p>
</blockquote>
<p>Imagine visual viewport is a frame for users to look the image through -- if <strong>layout viewport</strong> is that image.</p>
<h3 id="the-trick-">The &#39;Trick&#39;</h3>
<p>However, the CSS layout, especially percentual widths, are calculated <strong>relative to the layout viewport</strong>, which is considerably wider than the visual viewport.</p>
<p>How width is layout viewport? --&gt; It differs per browser:</p>
<ul>
<li>Safari iPhone: 980px</li>
<li>Opera: 850px</li>
<li>Android Webkit: 800px</li>
<li>IE: 974px</li>
</ul>
<p>The point is: browsers have chosen their dimensions of the layout viewport such that it <code>completely covers the screen in fully zoomed-out mode</code> (and is thus equal to the visual viewport).x</p>
<h3 id="media-queries">Media Queries</h3>
<p>Media queries work the same as on desktop:</p>
<ul>
<li><code>width/height</code> uses the <strong>layout viewport</strong> as its reference and is measured in CSS pixels</li>
<li><code>device-width/height</code> uses the device screen and is measured in device pixels.</li>
</ul>
<h3 id="problems-and-solutions-">Problems, and solutions.</h3>
<p>tl;dr - the webpage would be &quot;squeezed&quot; to fit in the device width
This is because the layout viewport is BIG, and to show all contents in the page, the browser would &quot;increase&quot; the visual viewport&#39;s width &amp; height (i.e: zoomed-out), thus making the layout viewport has the same size to visual viewport.</p>
<p>Plus, since the layout viewport is still BIG, all media queries following <code>width/height</code> would fail.</p>
<h4 id="solution">Solution</h4>
<p>The solution is using <strong><code>&lt;meta viewport&gt;</code></strong> to declare layout viewport in advanced. This approach was first raised by Apple, and luckily it has been adopted in most of mobile browsers.</p>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-title">meta</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"viewport"</span> <span class="hljs-attribute">content</span>=<span class="hljs-value">"width=device-width,initial-scale=1"</span>&gt;</span>
</code></pre>
</div></div><footer class="footer"><address class="author">Copyright &copy;<a rel="author" href="https://github.com/allenfantasy" class="author-name">Allen Wu</a>-<a href="https://github.com/allenfantasy/my-tech-diary" class="source-repo">Source</a></address><p>Generated by<a href="https://github.com/joyeecheung/diary" class="site-repo">Joyee Cheung&#39;s diary generator</a></p></footer></body></html>